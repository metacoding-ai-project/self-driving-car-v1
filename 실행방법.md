# 🚀 실행 방법 가이드

각 버전(v1, v2, v3)의 실행 방법과 결과 파일에 대한 상세 가이드입니다.

---

## 📦 공통 사전 준비

### 1. 패키지 설치

**Python 3.8 ~ 3.12:**
```bash
python -m pip install --upgrade pip
python -m pip install pygame numpy torch matplotlib
```
---

# Simulator v1 실행 방법

## 🎯 목적
과적합 문제가 발생하는 원본 버전을 실행하여 문제점을 확인합니다.

## 📝 실행 단계

### 1. 훈련 시작

```bash
cd simulator-v1
python train.py
```

**실행 중:**
- 화면에 파란색 자동차가 격자 위를 움직임
- 빨간 벽을 피하려고 노력
- 화면 상단에 학습 정보 표시
- **주의**: 한쪽으로만 이동하는 패턴 확인 가능

**조작키:**
- `ESC` - 훈련 중단

**예상 소요 시간:**
- NORMAL 속도 (30 FPS): ~20-30분
- FAST 속도 (60 FPS): ~10-15분

### 2. 생성되는 파일

훈련이 완료되면 다음 파일들이 생성됩니다:

#### 모델 파일
- **`model_final.pth`** ✅
  - 500 에피소드 훈련 완료 후 자동 저장
  - 학습된 AI의 신경망 가중치 저장
  - 테스트에 사용됨

- **`model_episode_100.pth`**
  - 100 에피소드 학습 상태 저장
  - 중간 모델 확인용

- **`model_episode_200.pth`**
  - 200 에피소드 학습 상태 저장

- **`model_episode_300.pth`**
  - 300 에피소드 학습 상태 저장

- **`model_episode_400.pth`**
  - 400 에피소드 학습 상태 저장

#### 결과 파일
- **`training_results.png`**
  - 학습 진행 상황 그래프
  - 보상 추이, 에피소드 길이 등 표시

### 3. 테스트 실행

```bash
python main.py
```

**실행 중:**
- 학습된 모델(`model_final.pth`)을 자동으로 로드
- 학습된 AI가 벽을 피하는 모습 확인
- **주의**: 항상 같은 경로만 사용하는지 확인

**조작키:**
- `R` - 리셋 (같은 경로로 다시 시작)
- `ESC` - 종료

**⚠️ 주의:**
- `train.py`를 먼저 실행해야 합니다!
- `model_final.pth` 파일이 없으면 오류 발생

---

# Simulator v2 실행 방법

## 🎯 목적
과적합 해결 방법이 적용된 버전을 실행하여 개선사항을 확인합니다.

## 📝 실행 단계

### 1. 훈련 시작

```bash
cd simulator-v2
python train.py
```

**실행 중:**
- 화면에 파란색 자동차가 격자 위를 움직임
- 빨간 벽을 피하려고 노력
- 화면 상단에 학습 정보 표시
- **개선**: 다양한 경로를 시도하는 모습 확인 가능

**조작키:**
- `ESC` - 훈련 중단

**예상 소요 시간:**
- NORMAL 속도 (30 FPS): ~20-30분
- FAST 속도 (60 FPS): ~10-15분

### 2. 생성되는 파일

훈련이 완료되면 다음 파일들이 생성됩니다:

#### 모델 파일
- **`model_final.pth`** ✅
  - 500 에피소드 훈련 완료 후 자동 저장
  - 경로 다양성 보상이 적용된 학습된 모델
  - 테스트에 사용됨

- **`model_episode_100.pth`**
  - 100 에피소드 학습 상태 저장

- **`model_episode_200.pth`**
  - 200 에피소드 학습 상태 저장

- **`model_episode_300.pth`**
  - 300 에피소드 학습 상태 저장

- **`model_episode_400.pth`**
  - 400 에피소드 학습 상태 저장

#### 결과 파일
- **`training_results.png`**
  - 학습 진행 상황 그래프
  - 보상 추이, 에피소드 길이 등 표시

### 3. 테스트 실행

```bash
python main.py
```

**실행 중:**
- 학습된 모델(`model_final.pth`)을 자동으로 로드
- 학습된 AI가 벽을 피하는 모습 확인
- **개선**: 다양한 경로를 사용하는 모습 확인

**조작키:**
- `R` - 리셋 (랜덤 방향으로 다시 시작)
- `ESC` - 종료

**✅ 개선사항 확인:**
- v1과 비교하여 다양한 경로를 사용하는지 확인
- 모든 방향으로 이동하는지 확인

---

# Simulator v3 실행 방법

## 🎯 목적
완전한 일반화가 달성된 최종 버전을 실행하여 여러 맵에서의 성능을 확인합니다.

## 📝 실행 단계

### 1. 훈련 시작

```bash
cd simulator-v3
python train.py
```

**실행 중:**
- 여러 맵에서 자동으로 학습
- 매 에피소드마다 다른 맵 사용
- 화면 상단에 학습 정보 표시
- 맵별 성공률 추적

**조작키:**
- `ESC` - 훈련 중단

**예상 소요 시간:**
- NORMAL 속도 (30 FPS): ~2-3시간 (3,000 에피소드)
- FAST 속도 (60 FPS): ~1-1.5시간
- ULTRA 속도 (120 FPS): ~30-45분

**💡 팁:**
- 빠른 학습을 원하면 `config.py`에서 `SHOW_TRAINING = False` 설정

### 2. 생성되는 파일

훈련이 완료되면 다음 파일들이 생성됩니다:

#### 모델 파일
- **`model_final.pth`** ✅
  - 3,000 에피소드 훈련 완료 후 자동 저장
  - 여러 맵에서 학습된 일반화된 모델
  - 테스트에 사용됨

- **`model_episode_500.pth`**
  - 500 에피소드 학습 상태 저장

- **`model_episode_1000.pth`**
  - 1,000 에피소드 학습 상태 저장

- **`model_episode_1500.pth`**
  - 1,500 에피소드 학습 상태 저장

- **`model_episode_2000.pth`**
  - 2,000 에피소드 학습 상태 저장

- **`model_episode_2500.pth`**
  - 2,500 에피소드 학습 상태 저장

#### 결과 파일
- **`training_results.png`**
  - 학습 진행 상황 그래프
  - 보상 그래프
  - 에피소드 길이 그래프
  - 맵별 성공률
  - 성공률 추이

### 3. 테스트 실행

```bash
python main.py
```

**실행 중:**
- 학습된 모델(`model_final.pth`)을 자동으로 로드
- 랜덤 맵으로 테스트
- 학습된 AI가 다양한 맵에서 작동하는 모습 확인

**조작키:**
- `R` - 새로운 랜덤 맵으로 리셋
- `ESC` - 종료

**✅ 일반화 확인:**
- 다양한 맵에서 작동하는지 확인
- 랜덤 시작점/목적지에서도 작동하는지 확인
- 새로운 맵에서도 작동하는지 확인

---

# 📊 실행 흐름 정리

## v1 실행 흐름

```
1. cd simulator-v1
2. python train.py
   → 학습 시작
   → model_final.pth 생성
   → training_results.png 생성
3. python main.py
   → model_final.pth 로드
   → 학습된 AI 테스트
```

## v2 실행 흐름

```
1. cd simulator-v2
2. python train.py
   → 학습 시작 (경로 다양성 보상 적용)
   → model_final.pth 생성
   → training_results.png 생성
3. python main.py
   → model_final.pth 로드
   → 학습된 AI 테스트
   → 다양한 경로 사용 확인
```

## v3 실행 흐름

```
1. cd simulator-v3
2. python train.py
   → 여러 맵에서 학습 시작
   → model_final.pth 생성
   → training_results.png 생성 (맵별 성공률 포함)
3. python main.py
   → model_final.pth 로드
   → 랜덤 맵으로 테스트
   → 일반화 성능 확인
```

---

# ⚙️ 속도 조절

각 버전의 `config.py` 파일에서 속도를 조절할 수 있습니다:

```python
# 천천히 (10 FPS) - 처음 배울 때
CURRENT_SPEED = SPEED_SLOW

# 보통 (30 FPS) - 추천!
CURRENT_SPEED = SPEED_NORMAL

# 빠르게 (60 FPS) - 빠른 훈련
CURRENT_SPEED = SPEED_FAST

# 초고속 (120 FPS) - 결과만 보고 싶을 때
CURRENT_SPEED = SPEED_ULTRA
```

### 화면 없이 빠르게 학습하기

```python
SHOW_TRAINING = False  # 화면 표시 안함
```

---

# 🔍 결과 파일 확인 방법

## training_results.png 확인

각 버전의 훈련이 완료되면 `training_results.png` 파일이 생성됩니다.

### v1, v2의 그래프
- 보상 추이
- 에피소드 길이
- 평균 보상

### v3의 그래프
- 보상 그래프
- 에피소드 길이 그래프
- 맵별 성공률
- 성공률 추이

## 모델 파일 확인

각 버전의 훈련이 완료되면 `model_final.pth` 파일이 생성됩니다.

**파일 위치:**
- v1: `simulator-v1/model_final.pth`
- v2: `simulator-v2/model_final.pth`
- v3: `simulator-v3/model_final.pth`

**사용 방법:**
- `main.py`가 자동으로 로드
- 수동으로 로드하려면:
  ```python
  agent.load("model_final.pth")
  ```

---

# 💡 실행 팁

## 처음 배울 때
1. `CURRENT_SPEED = SPEED_SLOW` 설정
2. `python train.py` 실행
3. 자동차가 어떻게 학습하는지 천천히 관찰

## 빠르게 결과만 보고 싶을 때
1. `CURRENT_SPEED = SPEED_ULTRA` 설정
2. `SHOW_TRAINING = False` 설정
3. `python train.py` 실행

## 학습된 AI 확인하기
1. `python main.py` 실행
2. 자동차가 벽을 피하는 모습 확인
3. `R` 키로 여러 번 리셋해서 다양한 시도 확인

---

# ⚠️ 주의사항

## v1 실행 시
- 한쪽으로만 이동하는 패턴 확인 가능
- 항상 같은 경로만 사용하는 문제 확인 가능
- 이는 교육용으로 의도된 동작입니다

## v2 실행 시
- v1과 비교하여 다양한 경로를 사용하는지 확인
- 모든 방향으로 이동하는지 확인

## v3 실행 시
- 여러 맵에서 학습하므로 시간이 오래 걸립니다
- 일반화 성능을 확인하려면 다양한 맵에서 테스트하세요

---

# 🔧 문제 해결

## 모델 파일이 없다고 나올 때
- `train.py`를 먼저 실행해야 합니다
- 훈련이 완료되어야 `model_final.pth` 파일이 생성됩니다

## 학습이 너무 느릴 때
- `CURRENT_SPEED = SPEED_FAST` 또는 `SPEED_ULTRA` 설정
- `SHOW_TRAINING = False` 설정

## 패키지 오류
- `python -m pip install --upgrade pip`
- `python -m pip install pygame-ce numpy torch matplotlib`

---

**더 자세한 내용은 각 버전의 README.md를 참고하세요!**
